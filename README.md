# Web德扑游戏

这是一个基于React和TypeScript的单机德州扑克游戏。游戏支持一个人类玩家和七个AI对手进行对战。

## 功能特点

- 8人桌德扑游戏，支持完整的德州扑克规则
- 每个玩家初始筹码200BB
- AI对手使用基于GTO(Game Theory Optimal)的策略
- 支持基本的德扑动作：加注、跟注、弃牌
- 玩家筹码耗尽时自动补充到200BB
- 完整的牌力评估系统，支持所有德扑牌型判断
- 位置系统，模拟真实德扑中的位置优势

## 技术栈

- React.js - 前端UI框架
- TypeScript - 类型安全的JavaScript超集
- Chakra UI - 组件库
- Vite - 构建工具

## 安装和运行

1. 克隆项目：
```bash
git clone [项目地址]
cd poker
```

2. 安装依赖：
```bash
npm install
```

3. 运行开发服务器：
```bash
npm run dev
```

4. 在浏览器中访问：
```
http://localhost:5173
```

## 游戏规则

1. 游戏开始时，每个玩家获得200BB的筹码
2. 游戏按照标准德州扑克规则进行：
   - 发放两张底牌给每位玩家
   - 经过一轮下注后，发放三张公共牌（翻牌）
   - 再一轮下注后，发放第四张公共牌（转牌）
   - 又一轮下注后，发放第五张公共牌（河牌）
   - 最后一轮下注后，进行摊牌比较
3. 玩家可以选择：
   - 弃牌：放弃当前手牌
   - 跟注：跟随当前最大注额
   - 加注：将注额提高到当前注额的2倍或更多

4. 当玩家筹码耗尽时，将自动获得200BB的新筹码继续游戏

## 牌力评估系统

游戏实现了一个精确的德州扑克牌力评估系统，能够准确计算任何手牌组合的相对强度：

1. **牌型识别**：系统能识别所有标准德扑牌型，从高牌到皇家同花顺
   - 高牌 (High Card)
   - 一对 (Pair)
   - 两对 (Two Pair)
   - 三条 (Three of a Kind)
   - 顺子 (Straight)
   - 同花 (Flush)
   - 葫芦 (Full House)
   - 四条 (Four of a Kind)
   - 同花顺 (Straight Flush)
   - 皇家同花顺 (Royal Flush)

2. **起手牌评估**：专门针对两张底牌的起手牌强度评估
   - 考虑口袋对子的特殊价值
   - 同花起手牌获得额外价值加成
   - 连牌起手获得额外价值加成
   - AK等高牌组合获得特殊加成

3. **牌型概率模型**：基于实际德扑统计数据的牌型概率分布
   - 高牌：17.4%
   - 一对：43.8%
   - 两对：23.5%
   - 三条：4.83%
   - 顺子：4.62%
   - 同花：3.03%
   - 葫芦：2.6%
   - 四条：0.168%
   - 同花顺：0.031%
   - 皇家同花顺：0.00015%

4. **相对强度计算**：不仅判断牌型，还能计算同一牌型内的相对强度
   - 考虑踢脚牌(kicker)的影响
   - 处理特殊情况如A2345顺子
   - 输出0-1之间的标准化强度值

5. **最佳五张牌识别**：从所有可用牌中自动识别最佳的五张牌组合

## AI决策逻辑系统

游戏中的AI玩家采用基于GTO(Game Theory Optimal)的策略，实现了复杂的决策逻辑：

1. **位置感知策略**：AI根据牌桌位置调整策略强度
   - 庄家位(BTN)：最强位置，策略最激进
   - 切牌位(CO)：次强位置，策略较激进
   - 劫机位(HJ)：中强位置
   - 中间位置(MP)：中等位置
   - 枪口位(UTG)：最弱位置，策略最保守
   - 盲注位(SB/BB)：特殊位置，有特定策略调整

2. **游戏阶段适应**：AI在不同游戏阶段(翻前、翻牌、转牌、河牌)采用不同策略
   - 翻前：更注重起手牌强度和位置
   - 翻牌：平衡成牌和听牌的价值
   - 转牌：更谨慎的游戏方式
   - 河牌：更极端的价值下注和弃牌决策

3. **动态加注尺寸**：根据牌力和游戏阶段智能调整加注大小
   - 翻前：2-4倍大盲的标准加注
   - 翻后：从0.33倍底池到1.2倍底池的动态加注
   - 自动将加注金额调整为0.5BB的整数倍

4. **底池赔率计算**：AI会计算当前底池赔率，并与手牌强度比较做出决策
   - 当赔率有利时更倾向于跟注
   - 当赔率不利时更倾向于弃牌

5. **混合策略实现**：
   - 对于相同情况，使用随机数生成器实现概率混合策略
   - 强牌有时会慢打(slow play)以诱导对手下注
   - 弱牌有时会诈唬(bluff)以赢得底池
   - 根据牌力强度动态调整诈唬和慢打的频率

6. **特殊情况处理**：
   - 筹码不足时的ALL-IN决策逻辑
   - 已有人加注时的再加注(3bet)策略
   - 不同牌力区间的精细化决策调整

7. **GTO平衡**：AI策略设计遵循GTO原则，使对手难以针对性利用
   - 在相似情况下使用不同行动，保持不可预测性
   - 根据位置和底池大小调整行动频率
   - 平衡价值下注和诈唬的比例

## 项目结构

```
src/
├── components/         # 游戏UI组件
│   ├── Table/         # 牌桌组件
│   ├── Player/        # 玩家组件
│   └── Cards/         # 扑克牌组件
├── utils/             # 工具函数
│   ├── poker/         # 德扑逻辑
│   │   ├── handEvaluator.ts  # 手牌评估器
│   │   └── gameLogic.ts      # 游戏核心逻辑
│   └── ai/            # AI策略
│       └── aiLogic.ts        # AI决策系统
├── types/             # TypeScript类型定义
│   └── poker.ts       # 游戏类型定义
├── context/           # React上下文
├── hooks/             # 自定义React钩子
├── assets/            # 静态资源
└── App.tsx            # 主应用组件
```

## 未来计划

- 添加更多AI策略选项
- 实现多人在线对战功能
- 添加游戏历史记录和统计
- 优化UI和动画效果
- 添加锦标赛模式

## 贡献

欢迎提交Issue和Pull Request来改进这个项目。

## 许可证

MIT
